import{G as S,X as g,r as o,j as e,S as _,A as b,x as r}from"./app-Dj-x9gWf.js";import{A as R}from"./AuthenticatedLayout-DFpkwVPj.js";import{D as O,T,F as B,a as E}from"./Dots-D21ZR3sJ.js";import{M as F}from"./MessageModal-D44QWZCV.js";import{C as I}from"./Money-CmnXgzPo.js";import"./transition-1oIjx2WC.js";import"./DarkModeToggle-BmCRQVkg.js";import"./formatDateToIndonesia-CSaSNsCs.js";import"./dialog-DFDsRvSU.js";function U({rekenings:l,attributes:n}){const{data:a,setData:h}=S(),k=g().props,x=g().props.auth.user.usertype,[m,f]=o.useState(null),[y,i]=o.useState(!1),p=[...n.DataRekening,...n.MyBCA,...n.Bisnis],[d,v]=o.useState([]),j=o.useMemo(()=>l.data.filter(t=>d.length===0||d.includes(t.status)),[l.data,d]),C=t=>{v(t)},c=["nama","bank","no_rek","user_ib","pin_ib","kode_mb","pin_mb","password_my_bca","pin_transaksi","coorporate_id","coorporate","id_coop","status","supplier"],w=p.filter(t=>c.includes(t.data)).sort((t,s)=>c.indexOf(t.data)-c.indexOf(s.data)),D=[{header:"Action",cell:t=>e.jsx("td",{className:"px-4 absolute top-1/2 -translate-y-1/2",children:e.jsxs("button",{onClick:()=>u(t.id),className:"relative inline-flex items-center p-0.5 text-sm font-medium text-center text-slate-500 hover:text-slate-800 rounded-lg focus:outline-none dark:text-slate-400 dark:hover:text-slate-100",type:"button",children:[e.jsx(E,{}),e.jsx("div",{className:`${m===t.id?"block":"hidden"} absolute left-[2rem] z-50 bg-white ring-2 rounded divide-y divide-slate-100 shadow dark:bg-slate-700 dark:divide-slate-600`,children:e.jsxs("ul",{className:"flex py-1 text-sm text-slate-700 dark:text-slate-200",children:[e.jsx("li",{children:e.jsx(r,{onClick:()=>u(t.id),className:"border-e-2 h-full block py-2 px-4 hover:bg-slate-100 dark:hover:bg-slate-600 dark:hover:text-white",children:e.jsx(I,{className:"size-[1rem]"})})}),e.jsx("li",{children:e.jsx(r,{href:`/rekening/${t.id}`,className:"text-blue-500 hover:text-blue-600 dark:hover:text-blue-600 border-e-2 h-full block py-2 px-4 hover:bg-blue-100 dark:hover:bg-blue-100 dark:hover:bg-opacity-90",children:"Detail"})}),x!=="user"&&e.jsx("li",{children:e.jsx(r,{href:`/rekening/${t.id}/edit`,className:"text-yellow-500 hover:text-yellow-600 dark:hover:text-yellow-600 border-e-2 h-full block py-2 px-4 hover:bg-yellow-100 dark:hover:bg-yellow-100 dark:hover:bg-opacity-90",children:"Edit"})}),x==="admin"&&e.jsx("li",{children:e.jsx(r,{onClick:s=>{s.preventDefault(),i(!0),h(t)},className:"text-red-500 hover:text-red-600 h-full block py-2 px-4 hover:bg-red-100 dark:hover:bg-red-100 dark:hover:bg-opacity-90",children:"Hapus"})})]})})]})})},...w],u=t=>{f(m===t?null:t)},N=()=>{a&&b.delete(route("rekening.destroy",a.id)),i(!1)},A=p.filter(t=>t.data==="bank").map(t=>t.options).flat(),M=async t=>{if(t.length>0&&confirm("Apakah anda yakin ingin menghapus beberapa data yang dipilih?"))try{b.post(route("rekening.batchDelete",{ids:t}))}catch{alert("Terjadi kesalahan saat menghapus data.")}};return e.jsxs(R,{header:e.jsx("h2",{className:"font-semibold text-xl text-slate-800 dark:text-slate-200 leading-tight",children:"Data Rekening"}),children:[e.jsx(_,{title:"Data Rekening"}),e.jsx(F,{info:k.info}),e.jsx(O,{isOpen:y,closeModal:()=>{i(!1),h({})},onConfirm:N,itemName:a==null?void 0:a.nama}),e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 ",children:e.jsx("div",{className:"sm:mt-6 bg-white dark:bg-slate-800 shadow-sm sm:rounded-lg",children:e.jsx(T,{data:j,field:l,attributes:D,filterCategory:A,TopTableLeft:e.jsx("a",{href:"/export-rekening",className:"inline-block  bg-green-600 text-white p-2 rounded-lg",children:"Export"}),TopTableRight:e.jsx("div",{className:"flex items-center space-x-3 w-full md:w-auto",children:e.jsx(B,{category:["Active","Stock","Sakit","Closed"],onFilterChange:C})}),handeActionSelectedRow:M})})})]})}export{U as default};
